// pacman animation
@mixin link-animation($color: $color-accent-alt, $size: pxToRem(28))
    display: block
    position: relative
    width: fit-content
    line-height: 1
    &::before,
    &::after
        align-items: center
        content: ''
        display: inline-flex
        transform: translateY(-50%)
    &::after
        background-color: $color-accent-alt
        border-radius: 100%
        height: $size
        width: $size
    &::before
        background: $color-background
        bottom: 0
        clip-path: polygon(100% 100%, 50% 50%, 100% 10%)
        height: $size
        left: unset
        position: absolute
        right: 0
        width: $size
        z-index: 2
        animation: bubble-mouth-reversed 0.3s forwards
    &:hover::before
        animation: bubble-mouth 0.3s forwards
    &:hover::before,
    &:hover::after
        transform: translateY(-50%) 

@keyframes bubble-mouth
    from
        clip-path: polygon(100% 74%, 44% 48%, 100% 21%)
    to
        clip-path: polygon(100% 50%, 44% 48%, 100% 50%)

@keyframes bubble-mouth-reversed
    from
        clip-path: polygon(100% 50%, 44% 48%, 100% 50%)
    to
        clip-path: polygon(100% 100%, 50% 50%, 100% 10%)

    
// categories
.post .post-categories,
.post-infos .post-categories
    li
        a
            background-color: $color-accent
            color: $color-background
            padding: pxToRem(4) $spacing-1
// TODO: check when there are multiple catagories

// call to action
.block-call_to_action
    .call_to_action
        .block-title
            margin-bottom: $spacing-4
        .description
            p
                font-family: $font-normal
                font-size: $lead-sidebar-size
                font-weight: 400
                line-height: $lead-sidebar-line-height
                @include media-breakpoint-up(desktop)
                    line-height: $lead-sidebar-line-height-desktop
                    font-size: $lead-sidebar-size-desktop

// events
.events
    &--grid
        .event
            .event-dates
                font-weight: normal
            .media
                img
                    aspect-ratio: 7/5
    &--list
        .event
            border-bottom: 0
            &-content
                .event-time,
                .event-dates
                    font-weight: normal
                .event-dates
                    @include body-text
                .event-time
                    margin-top: space()
            .media
                @include in-page-with-or-without-sidebar
                    margin-right: var(--grid-gutter-negative)
                    width: calc(#{columns(2)} + (var(--column-width) * 2))
                @include media-breakpoint-down(desktop)
                    max-width: 100%
                    margin-bottom: 0
                    margin-top: $spacing-2
                    order: 2
                img
                    aspect-ratio: 1
                    object-fit: cover
                    object-position: center
            @include media-breakpoint-up(desktop)
                margin-bottom: $spacing-5
                padding-bottom: 0
                &-content
                    .event-title
                        @include h3
                        text-transform: uppercase
                    .event-subtitle
                        @include h4
                        text-transform: uppercase

// posts
.block-posts
    &--large
        @include in-page-without-sidebar
            .large
                .post
                    .media
                        margin-left: calc(-1 * var(--column-width))
                        width: calc(#{columns(7)} - var(--grid-gutter))
                        picture 
                            -webkit-mask-image: url('/assets/images/masks/mask-2.svg')
                            mask-image: url('/assets/images/masks/mask-2.svg')
                            mask-repeat: no-repeat
                            mask-size: 100%
                            img
                                aspect-ratio: 4/3

// chapter
.block-chapter
    @include in-page-without-sidebar
        .chapter
            .text
                width: columns(6)
        &--with-image
            .chapter figure
                margin-right: calc(-1 * var(--column-width))
                width: columns(5)

// posts
.block-posts
    &--large
        .large
            @include in-page-without-sidebar
                .post
                    .post-content
                        position: relative
                        height: fit-content
                        padding-bottom: $spacing-4
                    .post-title
                        @include h1
                    .post-subtitle
                        @include h2
                    .more
                        display: none
                    time
                        bottom: 0
                        color: $color-text
                        position: absolute
                        text-transform: uppercase
    
// pages
.block-pages
    &--list
        &.with-description
            .block-content
                .block-title
                    @include link-animation
                    a
                        margin-right: space(2)
                        &::after
                            content: none
                .list
                    li
                        @include link-animation($size: pxToRem(16))
                        a::before
                            content: none
                @include in-page-without-sidebar
                    .top
                        .description p
                            @include lead
                    .list
                        li
                            @include link-animation($size: pxToRem(16))
                            text-transform: uppercase
                            font-weight: bold
                            .page-content
                                width: 100%
                                > p
                                    text-transform: none
                                    font-weight: normal

// timeline
.block-timeline
    &--vertical
        .timeline-event
            &::after
                bottom: pxToRem(8)
                top: pxToRem(37)
                width: pxToRem(2)
                left: calc(-#{$spacing-3} - 0.5px)

// persons
.block-persons
    &.block-with-long-text
        .person
            .persons
                @include in-page-without-sidebar
                    .avatar
                        width: columns(1.5)
    article.person
        .person-name
            text-transform: uppercase

// organizations
.block-organizations
    .organizations
        .organization
            .organization-content 
                .organization-title
                    @include h4
                    text-transform: uppercase
            .media
                border-radius: 100%